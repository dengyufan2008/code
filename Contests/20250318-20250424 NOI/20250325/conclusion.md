# 20250325 总结

## T1([a](https://qoj.ac/problem/10184)) [观察力] [树形 Dp] [斜率优化]

应得:100 实得:100 难度:1 用时:1h

对于树上求一条最优路径的问题, 考虑对每个点求出它到子树内所有点的最优路径, 然后将两条路径拼在一起.

## T2([b](https://qoj.ac/problem/10182)) [整体二分] [分块]

应得:70 实得:35 难度:3 用时:**3h**

并未想到二分.

归并排序两个有序序列可以 (整体) 二分, 也可以双指针. 在分块或根号分治时有用. 具体地, 分块可以块内二分块间双指针, 根号分治可以分最小值小于根号和大于根号两种.

对于一类询问次数上界与信息熵相关的交互题, 考虑将问题分为多个方案数彼此独立的小块, 则将问题化为了若干个子问题, 只需要求解一个子问题的询问次数与子问题的信息熵相关即可. 比如通过比较两个数大小来还原树上拓扑序, 可以分为若干个 归并排序两个序列 的子问题.

估算 $\ln {n+m \choose n}$ 可用 $(n+m) \ln (n+m) - n \ln n - m \ln m = n \ln \frac{n+m}{n} + m \ln \frac{n+m}{m}$. 来自斯特林公式 $\ln (n!) \approx n \ln n - n + \frac{1}{2} \ln (2 \pi n)$.

## T3([c](https://qoj.ac/problem/10185)) [笛卡尔树] [李超线段树] [扫描线] [决策单调性]

应得:42 实得:19 难度:5 用时:1h

时间不够.

对于一类询问与一个区间有交但不互相包含的所有区间的问题, 考虑分包含了询问区间的左端点但不包含右端点和对称的两种, 对于第一种从小往大对右端点扫描线, 相当于每次查询包含了一个点的所有区间. 把区间打在线段树对应 $O(\log n)$ 个结点上, 则查询只需考虑路径上 $O(\log n)$ 个结点上的区间即可.

对于一类动态查询大量元素的不可合并的信息的问题, 考虑猜测决策单调性并使用二分栈.

## 结算

在写完 T2 的 35pts 做法后仍浪费了 1h 尝试优化. 想到了链套菊花会把自己的做法卡掉, 但错误地考虑使用类似 self-adjusting 的方式来防御这类 hack, 而没有想到二分.
