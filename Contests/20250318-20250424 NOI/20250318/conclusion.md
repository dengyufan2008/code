# 20250318 总结

## T1([a](https://www.luogu.com.cn/problem/P11918)) [背包] [分块] [FFT]

应得:75 实得:75 难度:2 用时:2h

随机的情况下最优化背包可以只维护期望容量周围根号个容量, 尤其是当输出形式为浮点数. 同 20240719 T2.

## T2([b](https://www.luogu.com.cn/problem/P11928)) [类本质不同子序列个数] [DDp] [分段转移]

应得:100 实得:100 难度:2.5 用时:2.5h

难点在于不要想矩阵乘法.

类似本质不同子序列个数的 Dp $f_i = 2f_{i-1} - f_{p_i-1}$, 有出现次数为 1 的子序列个数为 $f_i = 2\sum_{j \in \Sigma} f_{p_{i, j}} - \sum_{j \in \Sigma} [p_{i, j} < p_{i, s_i}] f_{p{i, j}}$. 事实上将它看作从最左侧的特殊字符走到最右侧的特殊字符的路径更好理解.

动态 Dp 不一定要求把 Dp 方程转化为矩阵乘法的形式, 只需要满足可合并性即可.

合并 $f_{i, j}$ 与 $g_{k, l}$ 时, 若贡献形式形如 若条件 $P(j, k)$ 为真则将 $f_{i, j} g_{k, l}$ 累加到 $h_{i, l}$ 上, 则可以先转移 $i, j, k$ 再转移 $j, k, l$ 做到 $O(n^3)$. 事实上可以视为将计算三个矩阵的乘积的过程, 从直接大力计算变为了分两步计算.

## T3([c](https://www.luogu.com.cn/problem/P11924)) [倒推] [观察力] [线段树分裂]

应得:33 实得:0 难度:4 用时:0.5h

时间不够了, 再多 0.5h 应当能够写出来.

当给定的序列值域很小的时候, 可以考虑按某种方式生成的序列值域同样很小.

## 结算

在想了接近 2h T1 后果断放弃, 没写分块的 75pts 代码就去想 T2. 成功避免了死磕一年的结局.

不要随便猜结论. 翔哥 T1 猜了一个单调性挂成了暴力分.
