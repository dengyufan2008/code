# 20241219 总结

## T1(a) [观察力] [哈夫曼树] [线段树]

期望:80 实际:0 难度:3 用时:**4h**

与正解同复杂度, 但被卡常了, 80pts->50pts.

调用 ``multiset`` 与 ``unordered_multiset`` 的 ``erase()`` 函数时, 若传入的是一个值而非迭代器, 则会将容器内 **所有** 等于这个值的删去. 若只想删去一个, 应当使用 ``find()`` 找到迭代器再删去.

线段树中, 相比于使用标记下传, 使用标记永久化技巧可以降低常数.

一棵哈夫曼树合法的充要条件为 (设非叶子结点的点权 $w_i$ 为子树内所有叶子结点的点权和): 1. $\min_{dep_x = i} \{w_x\} \ge \max_{dep_x = i+1} \{w_x\}$. 2.存在一种给每个非叶子结点赋 $\le$ 或 $\ge$ 符号的方式, 使得每个非叶子结点的两个儿子 $x$ 与 $y$ 的深度为 $d$ 的子孙集合 $S_{x, d}$ 与 $S_{y, d}$ 满足 $w_u \oplus w_v (u \in S_{x, d}, v \in S_{y, d})$, 其中 $\oplus$ 为 $x$ 与 $y$ 父亲上赋的符号. (直观理解为值域在垂直方向和水平方向都无严格交).

## T2(b) [期望 Dp] [倍增]

期望:40 实际:40 难度:3.5 用时:0.5h

树上随机游走中 Dp 期望步数的方式为, 设 $f_i$ 表示 $i$ 走到父亲的期望步数, 有 $f_i = deg_i + \sum_{j \in Son_i} f_j$, 而不需要设 $g_i = a_i g_{fa} + b_i$, 其中 $g$ 为走到根的期望步数, 事实上有 $a_i = 1$, $b_i = f_i$.

对一类静态查询树上路径相关属性的问题, 应当优先考虑将问题划分为若干个互相独立的问题, 预处理一些值后倍增或差分. 之后再考虑实现上更为复杂的数据结构维护换根.

## T3(c) [观察力] [费用流]

期望:35 实际:0 难度:5 用时:0h

应当写一个暴力费用流的, 但没时间了.

能肉眼观察出这个性质的诗人握持: 对于如下图所示的小三角形组成的平行六边形, 若在对偶图中完美匹配所有的小三角形, 并删去被匹配的两三角形中间的边 (即用小平行四边形覆盖平行六边形), 一组完美匹配与空间中一种堆叠立方体使得高度在两个方向上都单调的方式一一对应.

![小三角形组成的平行四边形](https://cdn.luogu.com.cn/upload/image_hosting/sa5c2p40.png)

![空间中堆叠立方体](https://cdn.luogu.com.cn/upload/image_hosting/9x4clb8r.png)

由此可以在最优化问题中将 $O(n^2)$ 流量的费用流降低至 $O(n)$ 流量的费用流, 或在计数问题中使用 LGV 引理.

## 结算

在 T1 卡常上浪费了 1h, 但并没有提高分数. 以后不应在考场上卡常, 而是优化算法或思考其他的题目或写其他题目的暴力.
