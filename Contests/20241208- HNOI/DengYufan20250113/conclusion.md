# 20250113 总结

## T1(a) [双指针] [堆]

期望:100 实际:100 难度:2 用时:1.5h

形如 可以有 $k$ 个位置不同 的字符串匹配无法使用 KMP, 可使用双指针做到 $O(n^2)$, 似乎还能用多项式做到 $O(n \log n)$.

当需要维护最大值的集合内元素值域较小, 且最大值每次增加量 (或最小值每次减少量) 为 $O(1)$, 则可以维护每个值在集合内的出现次数和最大值, 做到均摊 $O(1)$ 维护 (若两个条件均满足则为严格 $O(1)$).

## T2(b) [势能分析] [启发式合并] [链表]

期望:30 实际:30 难度:3 用时:0.5h

若序列中的数只会减少, 则前缀最大值的总变化量 (包括了集合和值的变化) 是 $O(n+q)$ 的.

若发现某个过程中每一步之间满足一些性质 (如序列上的数分别单调不增, 答案单调不增), 则应保证维护每个步骤的途中同样满足性质 (如启发式合并的途中插入到一半时也应当满足).

特别地, 维护全局最优化答案时, 若想要利用答案单调的性质只维护最优值而不维护堆, 应当保证中途不会产生非法的答案, 即使之后会将这个非法答案移除.

已知插入的数的前驱时, 可以使用链表来模拟 ``set``.

## T3(c) [观察力] [长链剖分] [分类讨论]

期望:42 实际:42 难度:4 用时:2.5h

树上追逐游戏 (移动步数 **不超过** 某个值, 可以不动) 的输赢判定考虑分类讨论双方最大步数和树的直径的关系, 比较板.

若使用长链剖分, 则不应当有过于复杂的转移 (如前缀和相关等).

一种简化转移的方式是通过分类讨论分为少量可以暴力做的部分, 和可以不考虑与值域较小的数组 (如儿子的 Dp 数组) 有关的转移的部分.

实现上, 若对于同一份值使用了多个变量来维护 (如维护了 Dp 值的和, 乘法标记, 乘法标记逆元等), 应当写一个函数来实现修改值, 能够更加简洁, 且小幅降低常数.

## 结算

T3 的 $O(n^2)$ 暴力直到下考前 10min 才写完. 原因是 Dp 转移时为了防止越界而增设的边界判断写错了很多, 且修改转移时没有同步修改边界判断.

T2 的 $O(n^2 + q \alpha(n))$ 暴力是容易在 10min 内实现的, 事实上应当先实现了这一暴力再去拼 T3 的部分分, 而不是在写完 T3 后的最后 10min 来写. 险些翻车.
