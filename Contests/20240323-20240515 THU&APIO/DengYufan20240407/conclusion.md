# 20240407 总结 & [解](https://www.luogu.com/article/ybti3sqj)

## T1([a](https://www.luogu.com.cn/problem/U415120)) [线段树] [扫描线]

期望:50 实际:50 难度:4 用时:1.5h

对于一类线段树上维护 值为某定值的位置数 的问题, 考虑该定值是否同时为可能取到的最小 (大) 值, 则可以维护 最小 (大) 值 与 数量.

## T2([b](https://www.luogu.com.cn/problem/U415121)) [计数 Dp] [容斥] [多项式]

期望:65 实际:65 难度:3 用时:2.5h

同 HNOI Day1 T3 (wormhole), Dp 方程列出来后可以考虑其的实际意义来优化.

**对于一个总和确定的序列, 本质不同的元素只有 $O(\sqrt n)$ 种. 远古时代会的东西现在不会了, 哈哈.**

### 多项式取模 
给定最高项次数分别为 $n$ 和 $m$ 的多项式 $F(z)$ 和 $G(z)$, 求最高项次数分别为 $n - m$ 与 $m - 1$ 的多项式 $Q(z)$ 与 $R(z)$, 使得

$$F(z) = Q(z) G(z) + R(z).$$

考虑定义最高项系数为 $n$ 的多项式 $F(z)$ 的转置

$$F^T(z) = z^n F(\frac{1}{z})$$

即 reverse 每一项的系数. 有

$$F(z) = Q(z) G(z) + R(z)$$

$$z^n F(z) = z^{n - m} Q(z) z^m G(z) + z^{n - m + 1} z^{m - 1} R(z)$$

$$F^T(z) = Q^T(z) G^T(z) + z^{n - m + 1} R^T(z).$$

因为 $Q^T$ 的最高项系数为 $n - m$, 则

$$F^T(z) = Q^T(z) G^T(z) \pmod {z^{n - m + 1}}.$$

$O(n \log n)$

### 多项式多点求值

给定最高项次数为 $n$ 的多项式 $F(z) = \sum_i f_i z^i$ 与长为 $m$ 的序列 $a$, 求 $F(a_i)$.

考虑 $F(z) = F_i(z) * (z - a_i) + ans_i$, 则只要对每个 $i$ 求出 $F(z) \bmod (z - a_i)$ 的值即可. 考虑分治取模, 左边每次模 $\prod_{i = l}^{mid} (z - a_i)$, 右边同理. $O(n \log^2 n)$ ~~或许可以利用 class 20240404 转置原理, 但我还不会.~~

## T3([c](https://www.luogu.com.cn/problem/U415119) 或 [月球车站](https://uoj.ac/problem/683)) [不会]

期望:30 实际:5 难度:5 用时:1h

分类讨论时漏了情况. 不收敛的情况判断错误.

对于一类分数需要取模且需要取 $\max$ 的问题, 若有关的数很小, 不用手写分数类而考虑同时维护 double 与 long long.

对于一类 DAG 博弈问题, 必胜点的后继中存在一个必败点, 必败点的后继全是必胜点, 否则是平局点. 从确定状态的非平局点开始 BFS, 队列里只放非平局点, 必胜点则判断每个前驱的后继是否都是必胜点, 必败点则将每个前驱设为必胜. 剩下的点都是平局点, 每个非平局点的步数为更新它的点的步数 + 1.

对于一类随机博弈的步数期望问题, 考虑最优博弈的决策与步数.

## 结算

~~总体上没有出现太大的失误, 但 T3 没有想到一个显然的技巧就开始写分数类有些不应当.~~

总体上出现了巨大的失误, 且 T2 没有想到一个显然的技巧极不应当, 贺知章一样.
