# 20241005 总结

## T1(merchant) [二分答案]

期望:100 实际:90 难度:1.5 用时:**1.5h**

错误的使用了 ``sort`` 而非 ``nth_element`` 导致复杂度多一个 $\log$.

考虑一类最优化问题的答案函数形状时, 不应直接比较相邻两个位置的函数值, 而应考虑一组方案的答案函数形状, 总的答案函数为所有方案的 $\max$. 如当一组方案的答案函数为一次函数时, 总答案函数具有凸性.

需要 $O(n)$ 地查找序列前 $k$ 大, 可以使用 ``nth_element()``. 其实现原理为快速排序, 但每次只递归一侧, 期望复杂度 $O(n)$.

## T2(end) [贪心] [康托展开]

期望:100 实际:60 难度:2 用时:1h

将 $t$ 组询问离线, 题中给出 $t \le 10^5$ 但数据中 $t \le 2 \times 10^5$. 我要报警! ! ! ! !

$n!$ 的因数个数是极少的, $n = 40$ 时为 $6 \times 10^6$, 指数级增长.

对于特殊进制, 每一位位权为 $w_i$, 只需保证 $w_i \mid w_{i+1}$, 则第 $i$ 位上的数字至多为 $\frac{w_{i+1}}{w_i} - 1$, 且此时每个数都有且仅有唯一的分解方式. 因此康托展开的位权不需要一定有 $w_i = i!$, 也可是 $w_i = \frac{n!}{(n-i+1)!}$ 等.

## T3(end0) [观察力] [反悔贪心]

期望:100 实际:60 难度:3 用时:1h

想到了做法, 但是没有时间实现了.

对于一类操作序列并与目标序列匹配的问题, 若原序列无规律但目标序列有较好的性质, 则可以将操作原序列改为操作目标序列.

对于一类将序列操作 $k$ 次以内的最优化问题, 考虑最终序列的形态并由此得出每次操作的限制即性质, 如 $k$ 个操作区间不交.

## T4(shootluo) [贪心] [重链剖分] [换根]

期望:20 实际:20 难度:4 用时:0.5h

求和带权的深度和可以转化为求和子树的权值和. 事实上是将每个点的贡献放在每条边上.

树上选择一个连通块的问题, 若只关心连通块的度数且答案随树上拓扑序单调, 可将父亲绑在最优的儿子上, 即进行链剖分.

若需要插入删除并查询前 $k = \text{Const}$ 大的无序组合可合并函数, 线段树需要离线离散化, 平衡树常数大, 可以使用对顶堆 (4 个 ``priorith_queue`` /qiang).

## 结算

T1 用时过长导致没有时间实现 T3. 事实上在前 10min 就想到了二分答案, 但由于思考的视角不对并没有证明, 后思路偏离了较长时间. 放弃一个想法前应当多穷尽一些可能性.
