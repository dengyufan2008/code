# 20250520 总结

## T1(a) [关键点对]

应得:100 实得:100 难度:2 用时:**2.5h**

称字符串的一个区间 $[l, r]$ 是好的当且仅当 $s_{l-1}$ 和 $s_{r+1}$ 在区间内未出现, 或者是边界, 那么所有好的区间的数量是 $O(n|\Sigma|)$ 的, 长度总和是 $O(n|\Sigma|^2)$ 的. 证明考虑只有左端点到某个字符的下一个出现位置的区间才可能合法, 且一个字符只会对左右各 $O(|\Sigma|)$ 个端点产生贡献.

## T2([b](https://codeforces.com/problemset/problem/1250/K)) [网络流]

应得:100 实得:0 难度:2.5 用时:1h

要输出方案, 且以为需要上下界网络流, 于是认为极其难写便没写. 事实上 1.5h 就写完了.

将若干区间划分为 $n$ 组, 使得组内区间两两不交, 则 $n$ 的最小值为同时包含了一个相同区间的区间数的最大值. 使用 Dilworth 定理易证, 构造方案直接将所有区间按左端点升序排序, 然后任意地放在一个合法的组内即可.

对于一类在区间集合中选取若干个区间, 使得每个位置被覆盖的次数在一个范围 $[a_i, b_i]$ 中的问题, 可以使用志愿者招募模型, 即选取一个大数 $M$, 然后连一条链, 容量上下界为 $[M-b_i, M-a_i]$, 对于每个区间从左端点向右端点连容量为 1 的边, 跑一个流量为 $M$ 的可行流即可.

对于一类上下界网络流, 考虑将模型的形态画出来, 然后或许能观察出下界恰好构成合法的一组流, 则可以直接将下界消去, 上界减去下界. 若还是消不去, 还能考虑在建模时能否将一些东西对称掉, 使得边权发生改变. 比如从决策拿走哪些变为决策保留哪些.

## T3(c) [模拟费用流] [观察力]

应得:30 实得:30 难度:3.5 用时:1h

对于一类选若干条连通的链, 最大化交集的边权和的问题, 钦定一个一定要出现的叶子之后, 费用流建模是显然的, 也容易发现就是长链剖分取前若干大. 但注意到直径两端点之一一定会出现, 故枚举量变为了 2. 进一步说, 对于一类和最大化链长有关的问题, 若暴力做法需要枚举根, 则考虑能否将根定为直径两端点之一, 并尝试证明正确性.

对于上述问题, 若还对 $O(1)$ 条链作出了限制 (比如一定有一条链要经过一个点), 则考虑费用流的退流操作, 并做对应的调整. 比如分类讨论退的那个流量是否把所有贡献都退掉了, 全退掉可以用少选一条链再选上这个点向下的最长链加上向上的部分的贡献更新, 没全退掉可以往上找到的第一个被选的链, 把它的叶子改到这个点向下的最长链去. 更进一步说, 少选一条链再选上最长的调整方法是容易想到的, 那么不妨考虑它在费用流模型中的什么情况下是优的, 从而自然的进行了分类讨论.

## 结算

想 T1 的时候比较昏昏欲睡, 于是耗时比较久.

为啥感觉所有和直径有关的结论都注意不到. 前情提要: 20240926 T1.

