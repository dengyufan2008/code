# 20250505 总结

## T1(game) [观察力]

期望:100 实际:100 难度:3 用时:3.5h

对于一类博弈论题目, 若双方的目标分别为最大和最小化某个函数, 可以先考虑如何判断答案是否 $\le x$ 或 $\ge x$, 如函数为先手选取的数的 $\min$ 或 $\max$ 时可以变为 01 串, $\text{mex}$ 则可以变为 $\le x$ 的能否全部取到.

寻找双方的最优策略的时候可以考虑是否其中一方有无论另一方如何操作都不劣的策略 (如不断选取出现次数最多的数), 从而可以容易的推出另一方的策略 (如同样不断选取出现次数最多的数以抢走对方的最优决策).

当需要快速判断的条件极其复杂 (比如一个算法的过程中是否会出现某些特殊情况) 时, 考虑枚举出现特殊情况的时刻, 然后将条件转变为若干个不等式, 有时在最优化不等式意义下选取的时刻可以唯一确定.

## T2(pal) [观察力]

期望:75 实际:67 难度:3 用时:1h

忘记判串全是 0 的情况了.

对于一类若干个团的补图的匹配问题, 有经典结论若最大团大小不超过一半则有完美匹配, 否则一定是最大团与其他的尽可能的匹配. 比如有若干连续段, 每次可以删去相邻连续段各自的一个元素, 则最后剩下的元素数量可以使用这个结论计算.

## T3(flower) [询问分块] [平衡树] [势能分析]

期望:15 实际:15 难度:4 用时:0.5h

静态查询区间颜色数可以预处理数对 $(pre_i, i)$, 然后做二维数点. 考场上居然忘记了.

对于一类不带修容易做的数据结构题, 若修改 在某个维度上 是单点 (比如区间把颜色 $x$ 变为颜色 $y$ 在颜色一维上是单点修改), 则可以考虑询问分块, 并分本块涉及到的和没涉及到的.

使用 $O(n)$ 棵平衡树维护一个 $[1, n]$ 的划分, 每次将一棵平衡树的某个区间 Split 再 Merge 到另一棵平衡树上, 这样的复杂度是 $O((n+q) \log^2 n)$ 的. 实现上, 可以类似归并排序的每次 Split 出第一段再 Merge 到答案平衡树上.

考虑定义一棵平衡树的势能为维护的集合 $S$ 中相邻两数的差的 $\log$, 全局势能为所有平衡树的势能之和, 那么最劣情况显然是恰好互相穿插. 设答案平衡树上元素个数为 $m+1$, 相邻两个元素的差为 $d_i$, 势能的减小量为 $\sum_{i=1}^{m-1} \log(d_i + d_{i+1}) - \sum_{i=1}^m \log d_i$. 由于 $\log$ 是凸的, 有上式不小于 $m-1 + \sum_{i=1}^{m-1} {\log d_i + \log d_{i+1} \over 2} - \sum_{i=1}^m \log d_i$, 即 $m-1 - \log d_1 - \log d_m$, $O(m - \log n)$. 故每次花费 $O(m \log n)$ 的时间可以使势能减少 $m$, 而每次操作至多使势能增加 $O(\log n)$. 故复杂度为 $O((n+q) \log^2 n)$.

## 结算

T1 猜了个假结论, 然后对着假结论想优化想了 2h. 以后猜了结论一定要写暴力验证, 尤其是暴力不难写的情况. 不过正确结论的暴力挺难写的.
