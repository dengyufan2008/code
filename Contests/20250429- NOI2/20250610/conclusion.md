# 20250610 总结

## T1([a](https://www.luogu.com.cn/problem/AT_apc001_g)) [观察力] [构造] [归约]

应得:34 实得:24 难度:3.5 用时:2.5h

不想写预处理+暴搜.

对于一类构造题, 应当考虑一个较小的结构, 使得这样的结构重复多遍即可解决特殊性质, 而不是对于特殊性质整体构造. 这样能够有更强的拓展性. 比如, 本题全是 1 的部分分中, ``12123434...`` 要好于 ``1234...1234...``.

对于一类需要构造状态很庞大的东西的题目, 可以考虑利用已有的较小结构来把问题归约到较小的规模. 比如本题连续四个两侧都是 1 边的端点 ``wxyz`` 可以将 ``wy`` 和 ``xz`` 连边, 然后即可把这一段缩成一条 1 边.

## T2([b](https://www.luogu.com.cn/problem/P7124)) [重链剖分] [哈夫曼树] [分治]

应得:74 实得:74 难度:3 用时:2h

对于一类带权分治的问题 (比如重链剖分后分治每个轻子树, 显然每个子树的大小不同), 考虑使用哈夫曼树分治而非每次取 mid, 或许能让复杂度少一个 $\log$. 考虑哈夫曼树的复杂度, 若每次递归需要的花费是本次涉及到的所有元素的权值和, 设全局所有元素的权值和是 $s$, 一个元素的权值是 $a_i$, 则一个元素对复杂度的贡献是 $O(a_i \log {s \over a_i})$ 的. 考虑哈夫曼树建立的过程中, 小根堆顶是 $a_i$ 的时候, 堆内至多只有 $s \over a_i$ 个元素, 故在哈夫曼树上的深度是 $O(\log {s \over a_i})$ 的. 故所有元素的贡献和是 $O(s \log s - \sum a_i \log a_i)$ 的. 故若之后又会将每个元素拆开继续独立求解, 复杂度依旧是 $O(s \log s)$ 的.

树上对于每个点得到全集去除这个点的子树, 可以考虑上文的重链剖分, 但也可以考虑对 dfn 分治. 显然包含 mid 的区间有偏序关系, 故左右同时往中间扫即可. 虽然也是 $O(n \log n)$, 但比上文的方法常数大.

## T3(c) [分类讨论] [容斥]

应得:8 实得:1 难度:4.5 用时:0.5h

唐了, 认为自己推出的二维式子不对, 也没时间去验证.

对于一类解的形态可能比较复杂的问题, 考虑通过分类讨论来去掉一些简单情况, 并考虑剩下的情况是否有了一些额外性质, 从而对解的形态有了较好的约束. 一般来说剩下的情况的额外性质并不显然, 需要一定的胆量. 比如本题所有维度均不平整的情况, 除了 $z$ 轴上某些恰等于一个特殊相位的列外都是规则排列的.

## 结算

T2 与正解的差距只有一个哈夫曼树, 并且在最后意识到了暴力分治比较劣, 但没有时间继续改进了.
