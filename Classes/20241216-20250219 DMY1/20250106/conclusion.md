- 无向图给每条边定向使得形成 DAG 的方案数 = 用 -1 种颜色染色使得相邻点的颜色不同的方案数 $\times (-1)^{n}$, 其中 $n$ 为 无向图的点数. -1 种颜色可以理解为随便选则系数乘 -1, 排除掉一种则系数乘 -2, 以此类推; 或可理解为 $(\omega - 1)$ 种颜色, 其中 $\omega$ 大于所有自然数, 并忽略所有非常数项.

  <details><summary>Proof</summary>

  > 考虑后者的方案数. 设 $f(G, m)$ 表示将无向图 $G$ 用 $m$ 种颜色染色的方案数, 使得相邻点的颜色不同的方案数.
  >
  > 考虑一条边 $(x, y)$, 若不管这条边的限制, 则方案数为 $x$ 和 $y$ 颜色不同的方案数加上相同的方案数. 那么还需要把相同的方案数减去, 则直接将 $x$ 和 $y$ 合并成一个点即可. 故 $f(G, m) = f(G \setminus (x, y), m) - f(G', m)$, 其中 $G'$ 为合并 $x$ 和 $y$ 点之后的图. 边界条件为 $G$ 中一条边都没有, 方案数为 $m^{|G|}$.
  >
  > 考虑前者的方案数. 设 $g(G)$ 表示将无向图 $G$ 定向使得形成 DAG 的方案数.
  >
  > 考虑一条边 $(x, y)$, 若最后考虑这条边该如何定向, 则若 $x$ 与 $y$ 互相不可达有两种定向方式, 否则只有一种. 则可以变为删去这条边后的方案数 + 删去这条边后 $x$ 和 $y$ 互相不可达的方案数. 故 $g(G) = g(G \setminus (x, y)) + g(G')$, 其中 $G'$ 的定义同上. 边界条件同上, 方案数为 1.
  >
  > 不妨设 $f'(G, m) = f(G, m) \times (-1)^{|G|}$, 则 $f'$ 的边界条件方案数为 $(-m)^{|G|}$, 递推式为 $f'(G, m) = f'(G \setminus (x, y), m) + f'(G', m)$. 发现当 $m=-1$ 时 $f'$ 的边界条件与递推式与 $g$ 完全一致. 故 $g(G) = f(G, -1) \times (-1)^{|G|}$.
  </details>

- 求匹配方案数 (或别的需要记每个点的状态的问题) 时若图中边数较少, 则只需记后面还会用到的点, 可以大幅降低常数 (原来的 1% 左右). 其实差不多类似于一个每次枚举度数最大的点的状态然后把它删去的 Trick, 直到只剩环和链为止, 而且这个枚举度数最大的点的方法更优.

- 计数无向图的仙人掌子图可以用 Floyd 思想, 每次把多个连通块用 i 号点合并, 初始状态是所有的单个环. 需要使用子集 Exp. 点双/边双子图同理.

- SCC 可以划分为一个环然后每次加入一条端点在点集内, 其余点不在点集内的路径. 注意需要在路径的开头就钦定结尾是哪个点, 不然不知道有没有回来. 且会算重, 只能求解最优化问题.
