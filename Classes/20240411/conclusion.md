# 20240411 讲[题](https://www.luogu.com.cn/paste/gg40dcu5)总结

- 奇偶位分别考虑是一种常见思路. 在计数问题中若奇偶位没有互相限制, 则可以分别统计奇偶位的贡献, 从而减少状态数. [例](https://qoj.ac/problem/8330)

- 同理, 可以将横纵坐标分开. [例](https://www.luogu.com.cn/problem/AT_arc171_e)

- 对于一类从一个状态会 $O(1)$ 转移到多个状态, 但状态数不好优化只能优化转移的 Dp, 发现其类似有 $O(1)$ 的查询和 $O(\ge 1)$ 的修改, 则可考虑进行平衡.

  如做的是集合 Dp 要转移到超集, 则可以考虑 Meet-in-the-Middle, 前一半枚举转移后的集合, 后一半枚举转移前的集合. 则前一半对应查询, 后一半对应修改. [例](https://qoj.ac/problem/8005)

- 对于一类计数问题, 若要在 枚举每一种可能的集合 的情况下还要 对每个集合计算一个抽象式子, 可以考虑那个式子的组合意义 (要能简单表述的最好), 从而得到一些光看式子想不到的抽象转化. 事实上这一思路的适用范围较广, 如 HNOI 2024 Day1 T3 wormhole. [例](https://atcoder.jp/contests/wtf22-day2/tasks/wtf22_day2_d)

- 对于一类需要快速判断一些奇怪的问题是否成立的问题, 考虑将问题的成立与否转化为一些条件的真假, 然后根据这些条件设计 Hash 方程. 
  
  如长为 $n$ 的环 $a_i$ 上每次可以将长为 $m$ 的一段 +1/-1 $(m | n)$, 问能否变成全 0, 即问每个 $\bmod m$ 意义下的等价类中 $a_i$ 的和是否均相等. 可以取一个常质数 $p$, 哈希函数为 $Hash(a) = \sum_i a_i p^{i \bmod m}$, 判断即为 $Hash(a) * m = \sum_i a_i \sum_{j = 0}^{m - 1} p^j$. [例](https://qoj.ac/problem/7782)

- 当一个问题同时有两个经典弱化时, 先考虑假设自己会了其中一个能不能推广到原问题 (如树上 Xor 可以变成 序列上 Xor/01 Xor). 取更容易的一个并舍弃另一个. [例](https://www.luogu.com.cn/problem/AT_apc001_f)

- 对于树上的任意一个连通块, 其都对应了点分治中以某个中心为根, 不经过已经分治过的中心的连通块.

  Proof. 考虑原树的重心, 若其不在那个连通块里, 则它只会位于重心的一个子树中, 此时删掉重心没有影响; 若其在则重心即为要的那个分治中心.

- 满足某一性质的点构成的连通块中 $x$ 所在的那个连通块, 等价于所有 $i$ 满足 $x$ 到 $i$ 的路径上的所有点都满足性质构成的集合. 可以将一个跟很多点有关的连通块问题变成只跟自己有关的元素问题. [这两点对应的例](https://www.luogu.com.cn/problem/P5311)

- 同样的字符串技巧复刻. 对于字符串 $S, T$ 有 $S < T^\infty \Leftrightarrow S < TS$, $S^\infty < T^\infty \Leftrightarrow ST < TS$. LCP 同样相等 (显然取等号时不等但不重要).

  特别地, 利用 SA 可以求 $S_i S_j$ 和 $S_j S_i$ 的 LCP, 具体来说可以预处理 $S_1 S_2 S_3 ... S_n$ 的 SA, 先求 $S_i$ 和 $S_j$ 的 LCP, 然后再继续求两次. [例](https://www.luogu.com.cn/problem/AT_arc175_f)

- 若有两个区间 $R_1$ 与 $R_2$ 有交, 则对应线段树上的结点集合 $S_1$ 与 $S_2$ 中, 必然分别存在一个元素 $x \in S_1$ 和 $y \in S_2$, 使得 $x$ 与 $y$ 成祖孙关系.
  
  由此, 可以把每个修改对应的结点的祖先也打上相同的标记. 然后换成查询同样做一遍即可不重不漏.

- 构造一个满足条件的最小 DFA 方法: 随便构造一个合法的 DFA (可能有冗余), 然后进行缩点, 将每条出边指向的点全部对应等价的点缩在一起, 注意非结束结点与结束结点始终不等价, 缩第 $k$ 轮 (Base 0) 时要忽略 $k$ 步内能到达结束结点的结点. [例](https://www.luogu.com.cn/problem/P4339)
